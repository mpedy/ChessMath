<div>
	<div class="timer" data-second="8" data-height="20px" data-width="80%"></div>
	<script type="text/javascript">
	maketimer(document.getElementsByClassName("timer")[0]);
	stopTimerFunction = function(){
		document.getElementById("gobtn").disabled= true
		document.getElementById("reset").disabled= true
		handleMouseDown_casella = function(){}
		procedi(document.getElementById("gobtn"))
	}
	</script>
	<button id="reset" onclick="reset()" style="margin: 0px 20px;">Reset</button>
	<button id="gobtn" onclick="procedi(this)">Ehila</button>
</div>
<div id="chessboard"></div>

<script type="text/javascript">

drawChessboard(document.getElementById("chessboard"))

piece_position={
	"D5": "Rook.svg",
	"A1": "obstacle.svg",
	"D6": "obstacle.svg",
	"F4": "obstacle.svg",
	"B7": "rock-golem.svg",
	"C7": "rock-golem.svg",
	"B6": "rock-golem-1.svg",
	"C6": "rock-golem-1.svg"
}

drawPieces(document.getElementById("chessboard"),piece_position)

var caselle_colorate = new Array();
var caselle_corrette = [A5,B5,C5,E5,F5,G5,H5,D4,D3,D2,D1]

handleMouseDown_casella = function(e){
    var elem = e.currentTarget;
    casella = elem.getAttribute("casella");
    if(caselle_colorate.includes(casella)){
    	caselle_colorate.splice(caselle_colorate.indexOf(casella),1);
    	elem.removeChild(elem.children[elem.childElementCount-1]);
    }else{
    	caselle_colorate.push(casella);
    	var div = document.createElement("div");
    	div.style="background: red; border-radius: 50%; position: absolute; left: 10%; top: 10%; width: 80%; height: 80%; z-index: 1";
    	elem.appendChild(div);
    }
}

reset = function(){
	for(var i in caselle_colorate){
		var elem = document.getElementById(caselle_colorate[i])
		elem.removeChild(elem.children[elem.childElementCount-1]);
	}
	caselle_colorate = new Array();
}

procedi = function(btn){
	btn.disabled = true;
	console.log(caselle_colorate);
	console.log(caselle_corrette);
	for(var i in caselle_colorate){
		if(caselle_corrette.includes(caselle_colorate[i])){
			punti+=1;
		}else{
			punti-=1;
		}
	}
	alert("Punti: "+punti)
}

</script>